<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>–ó–∞–≥—Ä—É–∑–∫–∞ —Ç–µ—Å—Ç–∞...</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    /* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –Ω–æ–≤–æ–≥–æ –æ–∫–Ω–∞ */
    .work-accepted {
      animation: fadeIn 0.5s ease;
    }
    
    .accepted-icon {
      font-size: 80px;
      color: #4CAF50;
      margin-bottom: 20px;
    }
    
    .accepted-message {
      font-size: 24px;
      color: #4CAF50;
      margin: 20px 0;
      font-weight: bold;
    }
    
    .timer-message {
      font-size: 16px;
      color: #666;
      margin-top: 30px;
      opacity: 0.8;
    }
    
    /* –°—Ç–∏–ª–∏ –¥–ª—è –∫–Ω–æ–ø–∫–∏ –ø–æ–≤—Ç–æ—Ä–∞/–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è */
    .refresh-btn {
      background: linear-gradient(135deg, #9e9e9e, #757575);
      color: white;
      border: none;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      font-size: 18px;
      cursor: pointer;
      transition: all 0.3s;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
      margin-left: 10px;
    }
    
    .refresh-btn:hover:not(:disabled) {
      transform: rotate(45deg) scale(1.1);
      background: linear-gradient(135deg, #757575, #616161);
      box-shadow: 0 6px 12px rgba(0,0,0,0.3);
    }
    
    .refresh-btn:disabled {
      background: #cccccc;
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
      opacity: 0.6;
    }
    
    .button-group {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 15px;
      margin-top: 30px;
      flex-wrap: wrap;
    }
    
    /* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ */
    .progress-indicator i {
      font-size: 14px;
      color: white;
    }
    
    .progress-indicator.unanswered i {
      color: #999;
    }
    
    .progress-indicator.current i {
      color: white;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    @keyframes pulse {
      0% {
        transform: scale(1);
        box-shadow: 0 2px 4px rgba(255, 152, 0, 0.3);
      }
      50% {
        transform: scale(1.05);
        box-shadow: 0 4px 8px rgba(255, 152, 0, 0.5);
      }
      100% {
        transform: scale(1);
        box-shadow: 0 2px 4px rgba(255, 152, 0, 0.3);
      }
    }
    
    /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
    @media (max-width: 768px) {
      .progress-indicator i {
        font-size: 12px;
      }
    }
    
    @media (max-width: 480px) {
      .progress-indicator i {
        font-size: 10px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="telegram-header">
      <h1 id="page-title">–ó–∞–≥—Ä—É–∑–∫–∞ —Ç–µ—Å—Ç–∞...</h1>
    </div>

    <div class="section" id="student-info-section">
      <div class="section-title">
        <i class="fas fa-user-circle"></i> –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± —É—á–µ–Ω–∏–∫–µ
      </div>
      <div class="student-info">
        <div>
          <label for="student-name">–ò–º—è:</label>
          <input type="text" id="student-name" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è" />
        </div>
        <div>
          <label for="student-class">–ö–ª–∞—Å—Å:</label>
          <select id="student-class">
            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –∫–ª–∞—Å—Å</option>
            <option value="7">7 –∫–ª–∞—Å—Å</option>
            <option value="8">8 –∫–ª–∞—Å—Å</option>
            <option value="9">9 –∫–ª–∞—Å—Å</option>
            <option value="10">10 –∫–ª–∞—Å—Å</option>
            <option value="11">11 –∫–ª–∞—Å—Å</option>
          </select>
        </div>
      </div>
      <button class="start-test-btn" id="start-test-btn">
        <i class="fas fa-play-circle"></i> –ù–∞—á–∞—Ç—å –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω—É—é
      </button>
    </div>

    <div id="test-content" style="display: none;">
      <div class="section">
        <div class="progress-indicators" id="progress-indicators">
          <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
        </div>
      </div>

      <div class="section">
        <div class="question-container">
          <div class="question-type" id="question-type"></div>
          <div class="question-text" id="question-text"></div>
          <div class="options-container" id="options-container"></div>
          <div class="button-group">
            <button id="confirm-btn" disabled>
              <i class="fas fa-check-circle"></i> –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –æ—Ç–≤–µ—Ç
            </button>
            <button id="refresh-btn" class="refresh-btn" disabled title="–í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —ç—Ç–æ–º—É –≤–æ–ø—Ä–æ—Å—É –ø–æ–∑–∂–µ">
              <i class="fas fa-redo"></i>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- –ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å –¥–≤—É–º—è —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏ -->
  <div id="fullscreen-result" style="display: none;">
    <!-- –°–æ—Å—Ç–æ—è–Ω–∏–µ 1: –ü–æ–∫–∞–∑ –æ—Ü–µ–Ω–∫–∏ (–∏–∑–Ω–∞—á–∞–ª—å–Ω–æ–µ) -->
    <div class="fullscreen-content" id="grade-screen">
      <h2><i class="fas fa-trophy"></i> –í–∞—à —Ä–µ–∑—É–ª—å—Ç–∞—Ç</h2>
      <div class="fullscreen-grade" id="fullscreen-grade">5</div>
      <p style="margin: 15px 0; color: #666;">–ù–∞–±—Ä–∞–Ω–æ –±–∞–ª–ª–æ–≤: <span id="fullscreen-score">0</span> –∏–∑ <span id="fullscreen-max-score">0</span></p>
      <div id="fullscreen-breakdown" style="margin: 15px 0; color: #555; font-size: 14px;"></div>
      <button class="fullscreen-btn" id="finish-btn">
        <i class="fas fa-check"></i> –ó–∞–≤–µ—Ä—à–∏—Ç—å
      </button>
    </div>
    
    <!-- –°–æ—Å—Ç–æ—è–Ω–∏–µ 2: –†–∞–±–æ—Ç–∞ –ø—Ä–∏–Ω—è—Ç–∞ (–ø–æ—Å–ª–µ –Ω–∞–∂–∞—Ç–∏—è "–ó–∞–≤–µ—Ä—à–∏—Ç—å") -->
    <div class="fullscreen-content work-accepted" id="accepted-screen" style="display: none;">
      <div class="accepted-icon">
        <i class="fas fa-check-circle"></i>
      </div>
      <div class="accepted-message">–í–∞—à–∞ —Ä–∞–±–æ—Ç–∞ –ø—Ä–∏–Ω—è—Ç–∞!</div>
      <div style="margin: 30px 0; text-align: left; max-width: 400px;">
        <div style="margin-bottom: 15px; font-size: 18px; color: #333;">
          <strong>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∞:</strong>
        </div>
        <div style="margin-bottom: 10px; font-size: 16px; color: #555;">
          <i class="fas fa-star" style="color: #FFC107;"></i>
          –û—Ü–µ–Ω–∫–∞: <span id="accepted-grade">5</span>
        </div>
        <div style="margin-bottom: 10px; font-size: 16px; color: #555;">
          <i class="fas fa-chart-line" style="color: #4CAF50;"></i>
          –ë–∞–ª–ª—ã: <span id="accepted-score">0</span> –∏–∑ <span id="accepted-max-score">0</span>
        </div>
        <div id="accepted-breakdown" style="margin-top: 15px; padding: 15px; background: #f9f9f9; border-radius: 8px; font-size: 14px;">
          <!-- –î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ -->
        </div>
      </div>
      <div class="timer-message" id="timer-message">
        –ß–µ—Ä–µ–∑ 8 —Å–µ–∫—É–Ω–¥ –≤—ã –±—É–¥–µ—Ç–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–∞ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É...
      </div>
    </div>
  </div>

  <!-- –ê–Ω—Ç–∏—á–∏—Ç —Å–∏—Å—Ç–µ–º–∞ -->
  <div class="blocker-overlay" id="blockerOverlay"></div>
  <div class="anticheat-modal" id="anticheatModal">
    <div class="anticheat-title">üö® –ê–ù–¢–ò–ñ–£–õ–¨–ù–ò–ß–ê–¢–ï–õ–¨–ù–´–ô –†–ï–ñ–ò–ú üö®</div>
    <div class="anticheat-message" id="cheatMessage"></div>
    <div class="anticheat-timer" id="countdownTimer">03:00</div>
    <div class="password-input-container">
      <div class="password-label">–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è:</div>
      <input type="text" class="password-input" id="passwordInput" 
             maxlength="4" inputmode="numeric" placeholder="0000">
    </div>
    <button class="continue-btn" id="continueBtn" disabled>–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Ç–µ—Å—Ç</button>
  </div>

  <!-- –û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç —Å–∏—Å—Ç–µ–º—ã -->
  <script src="script.js"></script>

  <!-- –°–∫—Ä–∏–ø—Ç –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–µ—Å—Ç–∞ -->
  <script>
    // –ü–æ–ª—É—á–∞–µ–º –∏–º—è —Ç–µ—Å—Ç–∞ –∏–∑ URL
    const urlParams = new URLSearchParams(window.location.search);
    const testName = urlParams.get('test');
    
    // –ï—Å–ª–∏ —Ç–µ—Å—Ç –Ω–µ —É–∫–∞–∑–∞–Ω, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –æ—à–∏–±–∫—É
    if (!testName) {
      document.getElementById('page-title').textContent = '–û—à–∏–±–∫–∞: —Ç–µ—Å—Ç –Ω–µ —É–∫–∞–∑–∞–Ω';
      document.getElementById('student-info-section').innerHTML = `
        <div style="text-align: center; padding: 40px;">
          <i class="fas fa-exclamation-triangle" style="font-size: 48px; color: #f44336;"></i>
          <h3 style="color: #f44336; margin: 20px 0;">–¢–µ—Å—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω</h3>
          <p>–í–µ—Ä–Ω–∏—Ç–µ—Å—å –Ω–∞ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É –∏ –≤–≤–µ–¥–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∫–æ–¥ —Ç–µ—Å—Ç–∞.</p>
          <button onclick="window.location.href='index.html'" 
                  style="background: #4b6cb7; color: white; border: none; padding: 12px 24px; 
                         border-radius: 8px; margin-top: 20px; cursor: pointer;">
            <i class="fas fa-arrow-left"></i> –í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é
          </button>
        </div>
      `;
    } else {
      console.log(`üîÑ –ó–∞–≥—Ä—É–∂–∞–µ–º —Ç–µ—Å—Ç: ${testName}`);
      
      // –°–æ–∑–¥–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç script –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–µ—Å—Ç–∞
      const script = document.createElement('script');
      script.src = `test/${testName}.js`;
      
      script.onload = function() {
        console.log(`‚úÖ –§–∞–π–ª —Ç–µ—Å—Ç–∞ "${testName}.js" –∑–∞–≥—Ä—É–∂–µ–Ω —É—Å–ø–µ—à–Ω–æ`);
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã
        if (!window.TEST_CONFIG) {
          showError('–§–∞–π–ª —Ç–µ—Å—Ç–∞ –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ TEST_CONFIG');
          return;
        }
        
        if (!window.questionsBank || !Array.isArray(window.questionsBank)) {
          showError('–§–∞–π–ª —Ç–µ—Å—Ç–∞ –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –≤–æ–ø—Ä–æ—Å–æ–≤ (questionsBank)');
          return;
        }
        
        if (!window.problemsBank || !Array.isArray(window.problemsBank)) {
          showError('–§–∞–π–ª —Ç–µ—Å—Ç–∞ –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –∑–∞–¥–∞—á (problemsBank)');
          return;
        }
        
        // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.getElementById('page-title').textContent = window.TEST_CONFIG.title;
        document.title = window.TEST_CONFIG.title;
        
        console.log('üéØ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞:', window.TEST_CONFIG);
        console.log('üìö –í–æ–ø—Ä–æ—Å–æ–≤:', window.questionsBank.length);
        console.log('üßÆ –ó–∞–¥–∞—á:', window.problemsBank.length);
        
        // –ï—Å–ª–∏ –æ—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç —É–∂–µ –∑–∞–≥—Ä—É–∂–µ–Ω, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —Ç–µ—Å—Ç
        if (window.initTest) {
          window.initTest();
        } else {
          console.warn('‚ö†Ô∏è –û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç –µ—â–µ –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω, –æ–∂–∏–¥–∞–µ–º...');
          // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–∞ —Å–ª—É—á–∞–π, –µ—Å–ª–∏ script.js –∑–∞–≥—Ä—É–∑–∏—Ç—Å—è –ø–æ–∑–∂–µ
          document.addEventListener('scriptLoaded', function() {
            if (window.initTest) {
              window.initTest();
            }
          });
        }
      };
      
      script.onerror = function() {
        console.error(`‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–µ—Å—Ç–∞ "${testName}"`);
        showError(`–ö–æ–¥ <strong>${testName}</strong> –Ω–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω.`);
      };
      
      document.head.appendChild(script);
    }
    
    // –§—É–Ω–∫—Ü–∏—è –ø–æ–∫–∞–∑–∞ –æ—à–∏–±–∫–∏
    function showError(message) {
      document.getElementById('page-title').textContent = '–¢–µ—Å—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω';
      document.getElementById('student-info-section').innerHTML = `
        <div style="text-align: center; padding: 40px;">
          <i class="fas fa-times-circle" style="font-size: 48px; color: #f44336;"></i>
          <h3 style="color: #f44336; margin: 20px 0;">–¢–µ—Å—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω</h3>
          <p>${message}</p>
          <button onclick="window.location.href='index.html'" 
                  style="background: #4b6cb7; color: white; border: none; padding: 12px 24px; 
                         border-radius: 8px; margin-top: 20px; cursor: pointer;">
            <i class="fas fa-arrow-left"></i> –í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é
          </button>
        </div>
      `;
    }
    
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —Ç–µ—Å—Ç –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞
    document.addEventListener('DOMContentLoaded', function() {
      console.log('üìö –°–∏—Å—Ç–µ–º–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω–∞, –æ–∂–∏–¥–∞–µ–º —Ç–µ—Å—Ç...');
      
      // –î–æ–±–∞–≤–ª—è–µ–º –≥–ª–æ–±–∞–ª—å–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –Ω–∞ —ç–∫—Ä–∞–Ω "–†–∞–±–æ—Ç–∞ –ø—Ä–∏–Ω—è—Ç–∞"
      window.showWorkAcceptedScreen = function(grade, score, maxScore, breakdown) {
        // –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º —ç–∫—Ä–∞–Ω—ã
        document.getElementById('grade-screen').style.display = 'none';
        document.getElementById('accepted-screen').style.display = 'block';
        
        // –ó–∞–ø–æ–ª–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ
        document.getElementById('accepted-grade').textContent = grade;
        document.getElementById('accepted-score').textContent = score;
        document.getElementById('accepted-max-score').textContent = maxScore;
        document.getElementById('accepted-breakdown').innerHTML = breakdown;
        
        // –ó–∞–ø—É—Å–∫–∞–µ–º —Ç–∞–π–º–µ—Ä –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –æ—Ç—Å—á–µ—Ç–∞
        let seconds = 8;
        const timerMessage = document.getElementById('timer-message');
        const timerInterval = setInterval(() => {
          seconds--;
          timerMessage.textContent = `–ß–µ—Ä–µ–∑ ${seconds} —Å–µ–∫—É–Ω–¥ –≤—ã –±—É–¥–µ—Ç–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–∞ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É...`;
          
          if (seconds <= 0) {
            clearInterval(timerInterval);
            window.location.href = "index.html";
          }
        }, 1000);
      };
    });
  </script>
</body>
</html>