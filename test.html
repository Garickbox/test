<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Загрузка теста...</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">
    <div class="telegram-header">
      <h1 id="test-title">Загрузка теста...</h1>
    </div>

    <div id="test-content" style="display: none;">
      <!-- Здесь будет загруженный тест -->
      <div id="loading">Загрузка теста...</div>
    </div>
  </div>

  <script>
    // Получаем имя теста из URL
    const urlParams = new URLSearchParams(window.location.search);
    const testName = urlParams.get('test');
    
    if (!testName) {
      // Если нет параметра, показываем ошибку
      document.getElementById('test-title').textContent = 'Тест не указан';
      document.title = 'Ошибка: тест не указан';
    } else {
      // Динамически загружаем файл теста из папки test/
      const script = document.createElement('script');
      script.src = `test/${testName}.js`;
      
      script.onload = function() {
        console.log('Тест загружен:', testName);
        
        // Обновляем заголовок
        if (window.TEST_CONFIG && window.TEST_CONFIG.title) {
          document.title = window.TEST_CONFIG.title;
          document.getElementById('test-title').textContent = window.TEST_CONFIG.title;
        }
        
        // Загружаем основной скрипт
        const mainScript = document.createElement('script');
        mainScript.src = 'script.js';
        document.head.appendChild(mainScript);
      };
      
      script.onerror = function() {
        console.error('Ошибка загрузки теста:', testName);
        document.getElementById('test-title').textContent = 'Тест не найден';
        document.title = 'Ошибка: тест не найден';
        document.getElementById('loading').textContent = 'Ошибка: тест не найден. Проверьте код теста.';
      };
      
      document.head.appendChild(script);
    }
  </script>
</body>
</html>